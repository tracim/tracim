# Performing Migrations

## Introduction

This document is intended for developers.

Migrations on `Tracim` uses [alembic](http://alembic.zzzcomputing.com/en/latest/index.html) which is the migration tool dedicated to SQLAlchemy.

In order to use the `tracimcli` commands, go to the root of the project and activate the Tracim virtualenv:

```bash
user@host:~/tracim_backend$ source env/bin/activate
(env) user@host:~/tracim_backend$
```

## Migration How-To - Overview

### Upgrading the Database to the Last Revision

```bash
alembic -c development.ini upgrade head
```

### Downgrading the Database

To the previous version:

```bash
alembic -c development.ini downgrade -1
```

To a specific database revision:

```bash
alembic -c development.ini downgrade <database_revision>
```

## Migration How-To - Advanced (for Developers)

### Retrieving the Current Version of the Database

```bash
alembic -c development.ini current
```

## Set Alembic Stamp to the Last Version (First-Time Use)

```bash
alembic -c development.ini stamp head
```


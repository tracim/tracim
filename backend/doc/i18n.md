# Internationalisation(i18n) of tracim Backend.

Actually the way internationalisation of tracim_backend work is using json file from [locale subdir](../tracim_backend/locale).
those json file are now generated from po file generated by babel.

## Initialisation

### add need language translation

if you want to add a new language, do something like this :

    python setup.py extract_messages
    python setup.py init_catalog -l "de"

_de_ is iso639 for german langage, that's an example. you should choose the correct one for
the one you add (see https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)
that's just an example

### update langage translation

If you want to update langage translation of german translation for example you need to do this.
you first need to update .po translation file:

    python setup.py extract_messages
    python setup.py update_catalog

## add translations

you now can edit po file like "tracim_backend/locale/_de_/LC_MESSAGES/tracim_backend.po" to set translation string.

## create/overwrite json file from .po

### install i18n-conv to convert .po file as json i18next compatible file

to overwrite json file you need i18n-conv tool.

    sudo npm install i18next-conv -g

### create/overwrite json files

json file should be place in place like tracim_backend/locale/_de_/backend.json.
to do this, you can run this script in backend folder:

    ./update_i18n_json_file.sh

## Best practices

### Do not touch at backend.json file
Tracim backend rely on backend.json file generated by `update_i18n_json_file.sh` script.
You should always change value in .po file because .json file are overriden when script is used. .json
file are also not tracked by git.

### english translation = translation key
To avoid multiple version of english translation, default translation key are english one.
**No translation should be done in english po file**.

Another reason of this, is for some specific translation on translation key of string available in config, like email subject.
Default value is translated but english translation should stay
sync to config value to be consistent and not confusing.
